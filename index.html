<!DOCTYPE html>
<html lang="zh-Hans">

<head>
    <title>我的导航</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="./style.css">
</head>

<body>
    <header>

    </header>
    <main>
        <div class="wrapper" id='main'></div>
    </main>
    <footer>

    </footer>
    <script>
        var keys = {
            '0': ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p'],
            '1': ['a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l'],
            '2': ['z', 'x', 'c', 'v', 'b', 'n', 'm'],
            'length': 3
        }
        var hash = {
                'q': 'qq.com',
                'w': 'weibo.com',
                'e': 'ele.me',
                'r': 'renren.com',
                't': 'taobao.com',
                'y': 'youku.com',
                'u': undefined,
                'i': 'iqiyi.com',
                'o': 'opera.com',
                'p': undefined,
                'a': 'amazon.cn',
                's': 'sohu.com',
                'd': 'dangdang.com',
                'f': undefined,
                'g': 'amap.com',
                'h': undefined,
                'j': 'jd.com',
                'k': undefined,
                'l': undefined,
                'z': 'zhihu.com',
                'x': 'ctrip.com',
                'c': 'cainiao.com',
                'v': undefined,
                'b': 'bilibili.com',
                'n': undefined,
                'm': 'mobike.com'
            }
            //取出 hashInLocalStorage 中的 modefiedWebsite 对应的hash
        var hashInLocalStorage = JSON.parse(localStorage.getItem('modefiedWebsite') || 'null');

        if (hashInLocalStorage) {
            hash = hashInLocalStorage
        }


        //遍历 keys ，生成kbd标签
        index = 0;
        while (index < keys.length) {
            div1 = document.createElement('div');
            main.appendChild(div1);
            row = keys[index];
            index2 = 0;

            while (index2 < row.length) {
                kbd = document.createElement('kbd');
                kbd.textContent = row[index2];
                button = document.createElement('button');
                button.textContent = '编辑';
                button.id = row[index2];
                button.onclick = function(click) {
                    key = click.target.id;
                    editWebsite = prompt('编辑网址');
                    hash[key] = editWebsite;
                    localStorage.setItem('modefiedWebsite', JSON.stringify(hash));
                }
                kbd.appendChild(button);
                div1.appendChild(kbd);
                index2 = index2 + 1;
            }
            index = index + 1;
        }

        document.onkeypress = function(press) {
            key = press['key'];
            website = hash[key];
            //location.href = 'http://' + website;
            window.open('http://' + website, '_blank');
        }
    </script>
</body>

</html>